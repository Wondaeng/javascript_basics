<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>2.2 Code structure</title>
</head>
<body>
    <h1>Code structure</h1>
    <p>그럼 각 스크립트 블럭이 어떻게 이루어지는지 살펴봅시다.</p>
    <h2>Statement(문)</h2>
    <p>
        <div>
            JS 문법에서 statement란 엔진(이 경우엔 브라우저)으로 하여금 어떠한 행위(action)을 실행시키는 단위입니다. 정확한 명세가 궁금하신 분들은 <a href="https://tc39.es/ecma262/">ECMAScript 사이트</a>를 확인하세요.
            우리가 앞서 봤던 <code>alert();</code>도 브라우저를 통해 유저에게 Hello, world!라는 팝업을 띄우는 동작을 실행시키는 statement죠. 
            Statement는 보통 세미콜론(;)으로 구분됩니다. 예를 들면:
            <pre>
            <code>
                alert('Hello'); alert('World!');
            </code>
            </pre>
            일반적으로는 statement들은 아래와 같이 가독성을 위해 별개의 줄에 나눠 씁니다:
            <pre>
            <code>
                alert('Hello');
                alert('World!');
            </code>
            </pre>        
        </div>
    </p>
    <h2>Semicolons(세미콜론)</h2>
    <p>
        <div>
            참고로, 대부분의 경우엔 line break(줄바꿈)가 있는 경우엔 세미콜론을 쓰지 않아도 잘 작동합니다:
            <pre>
            <code>
                alert('Hello')
                alert('World!')
            </code>
            </pre>    
            JS에선 줄바꿈을 "implicit" semicolon으로 해석하기 때문입니다. 이를 <a href="https://tc39.es/ecma262/#sec-automatic-semicolon-insertion">automatic semicolon insertion</a>이라 부릅니다.
        </div>
        <div>
            그러나 대부분의 경우 줄바꿈을 세미콜론으로 해석한다는 것은, <b>"항상 그렇지 않다"라는 것을 의미</b>하기도 합니다. 바로 아래와 같은 경우죠:
            <pre>
            <code>
                alert(3 +
                1
                + 2);
            </code>
            </pre> 
            이 경우엔 줄바꿈 자리에 세미콜론을 삽입하징 않습니다. 따라서 정상적으로 <code>6</code>을 출력합니다. 어찌보면 당연한일입니다. 한 줄이 <code>+</code>로 끝났고 아직 expression이 마무리 되지 않았으니까요.
            만약 저자리에 세미콜론이 들어갔다면 incomplete expression이 되어 정상적으로 계산이 되지 않았을 것입니다. JS가 올바르게 상황을 추측하고, 임의대로 세미콜론을 넣지 않은 것 입니다.        
        </div>
        <div>
            <b>하지만 반대로 이러한 유연성 떄문에 JS가 implicit 세미콜론이 필요한 곳에 넣지 않는 경우가 있습니다.</b>
            <pre>
            <code>
                alert("Hello");

                [1, 2].forEach(alert);
            </code>
            </pre> 
            아직 <code>[]</code>와 <code>forEach</code>가 무슨 뜻인지 몰라도 괜찮습니다. 다만 이 경우, 프로그램의 올바른 실행 결과는 <code>Hello</code>, <code>1</code>, <code>2</code>가 적힌 알림창을 순차적으로 보여주는 것입니다.
            그럼 이제 <code>alert</code>뒤의 세미콜론을 지우고 줄바꿈으로 JS가 implicit semicolon을 삽입하게끔 유도해봅시다:
            <pre>
            <code>
                alert("Hello")

                [1, 2].forEach(alert);
            </code>
            </pre> 
            이 경우엔 <code>Hello</code>만 출력이 됩니다. 그 뒤로는 에러가 발생합니다 (이건 콘솔을 열어야지만 확인이 가능합니다). 더이상 숫자가 출력되지 않습니다.
            이는 JS가 첫 줄의 <code>alert</code> 뒤의 줄바꿈을 implicit semicolon으로 인식하지 않았기 때문입니다 (뒤따라 오는 코드가 이전엔 <code>alert</code>함수였지만, 이 경우엔 대괄호로 바뀌었기 때문입니다).
            따라서 이 코드는 아래와 같은 한줄의 statement와 동일하게 취급됩니다:
            <pre>
            <code>
                alert("Hello")[1, 2].forEach(alert);
            </code>
            </pre>             
            딱봐도 이상하죠? 
            <br>
            이는 유연성의 대가입니다. 실제로 JS 커뮤니티에서는 이에 대해 문법이 좀더 엄격해야 한다는 의견도 많습니다. 일단은 초보자의 입장에서 왠만해선 세미콜론을 붙여주도록 합시다. 
        </div>
        <h2>Comments(주석)</h2>
        <div>
            만약 10년전에 쓴 코드를 다시본다면 어떨까요? 본인이 작성했더라도 각 부분의 코드가 무슨일을 하는건지 정확히 파악하기 어려울 것입니다. 또, 다른 사람들과 협업해야할 경우도 있을 것입니다. 아무 설명없이 남이쓴 코드를 이해하는 것은 굉장히 고통스럽습니다.
            이러한 경우를 방지하기 위해 개발자들은 주석(comments)을 사용합니다. 주석은 복잡한 코드를 설명하기 위해 개발자가 코드상에 남기는 메모입니다. 
            주석은 스크립트 내의 어느 부분에나 들어갈 수 있으며, JS 엔진은 주석 처리된 부분은 무엇이 적혀있던지 간에 완전히 무시합니다. 
        </div>    
        <div>
            한 줄 단위 주석처리는 <code>//</code>를 각 줄에 쓰고, 여러줄을 한번에 주석처리하려면 해당 부분을 <code>/*</code>와 <code>*/</code>로 감싸줍니다:
            <pre>
            <code>
                // This comment occupies a line of its own
                alert('Hello');

                alert('World'); // This comment follows the statement
            </code>
            </pre>
            <pre>
            <code>
                /* An example with two messages.
                This is a multiline comment.
                */
                alert('Hello');
                alert('World');
            </code>
            </pre>   
            이를 이용해서 (사실 좋은 디버깅 습관은 아니라고 하지만) 가끔씩 코드의 일부분을 잠깐만 실행이 안되게 하려고 주석처리를 하는 경우도 있습니다.
        </div>   
        <div>
            참고로 대부분의 에디터에서 Ctrl + / 로 single-line 주석처리를, Ctrl + Shift + / 로 multiline 주석처리를 할 수 있습니다.
            또한, multiline 주석처리는 nested로 하면 안됩니다. 
            <pre>
            <code>
                /* 
                /* nested comment ?!? */  // 여기서 주석 끝.
                */                        // 주석 밖인데 "*/"라는 이상한 기호가 나옴.
                alert( 'World' );  
            </code>    
            </pre>
            왜그럴까요? JS 엔진은 단순히 <code>/*</code>를 만나면 지금부터 주석이 시작이고, <code>*/</code>를 만나면 주석이 끝난다 생각합니다. 그럼 안쪽 <code>*/</code>에서 주석이 이미 끝나버리고,
            남아있는 바깥을 감싸는 <code>*/</code>는 문법에 맞지않는 이상한 코드가 되는 것입니다.
        </div>
    </p>  
</body>
</html>