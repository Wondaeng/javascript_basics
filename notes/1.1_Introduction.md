# An Introduction
## 1.1 An Introduction to JavaScript
### JavaScript란?
- *JavaScript*란 원래 "페이지가 살아움직이게 하기 위해서" 만들어진 언어다.
- 이 언어로 짜여진 프로그램은 *스크립트(Script)* 라 부른다.
- 이 스크립트는 웹페이지의 HTML에 바로 쓰여서 작동하며, 페이지가 불러와짐과 동시에 실행된다.

  
#### **왜 _Java_Script라고 불리나요?**
처음 만들어 졌을때의 이름은 "**Live**Script"였으나, 당시 굉장히 유행했던 Java와 뭔가 연관있어 보이게 포지셔닝하면 도움이 되지 않을까 싶어서 JavaScript로 이름을 바꿨다.  
하지만 언어가 성숙함에 따라, JavaScript는 [ECMAScript](https://en.wikipedia.org/wiki/ECMAScript))라는 자체 명세를 가진 완전히 독립적인 언어가 되었으며 현재는 **자바와 아무런 연관이 없다**.

- 자바 스크립트는 브라우저 뿐만아닌 JavaScript engine이라는 프로그램을 가진 모든 장치에서 실행이 가능하다.
- 브라우저는 JavaScript virtual machine이라 불리는 엔진이 내장되어있다.
e.g., Chrome의 V8, Firefox의 SpiderMonkey, IE의 Chakra 등등...

  
#### 엔진이 어떻게 작동하나요?
1. 엔진(브라우저의 경우엔 내장 엔진)은 쓰여진 자바스크립트 스크립트를 파싱한다.
2. 스크립트를 기계어로 컴파일한다.
3. 기계가 코드를 실행한다.

*엔진은 각 단계마다 최적화를 실행한다. 심지어 컴파일 완료된 스크립트가 실행되고 나서 해당 구문을 통해 움직이는 data flow까지 지켜보다가 추가적으로 최적화를 하기도 한다.*

  
### 브라우저에 내장된 자바스크립트는 무엇을 할 수 있나요?
현대의 자바스크립트는 "안전"한 언어다 (사실 안전을 어떻게 정의하느냐에 따라 매우 다르긴 하지만..), 왜냐하면 자바스크립트는 low-level의 메모리나 CPU에 접근을 제공하지 않기 때문이다. 애초에 이 언어는 브라우저 환경에서 만들어졌고, 브라우저 환경에서는 그런 기능이 필요하지 않았기 때문.  
자바스크립트가 어느 환경에서 돌아가냐에 따라 할 수 있는 일은 천차만별로 바뀐다. 일반적으로 다음과 같은 작업을 할 수 있다:

- 페이지에 새로운 HTML 삽입, 현존하는 요소 변경, 스타일 변경
- 유저 입력에 반응, 마우스 클릭 감지, 키 입력 감지
- 네트워크를 통해 다른 서버에 요청 보내기, 파일 업로드/다운로드 (AJAX & COMET)
- 쿠키 저장/설정
- 클라이언트 단의 데이터 기억 (local storage) 등등 ...

### 그럼 무엇을 할 수 없나요?
악성 웹페이지로부터 유저를 보호하기위해 자바스크립트의 기능은 의도적으로 제한됨:

- 웹페이지의 자바스크립트는 하드디스크 상의 임의의 파일을 읽거나 쓸수 없음. 현대의 브라우저들은 제한된, 명백한 액션(e.g., 파일을 브라우저에 끌어다 놓거나, 브라우저 윈도우를 통해 선탟하는 등)을 유저가 취했을때 한정적으로 `<input>`태그를 통해 가능. 웹캠이나 마이크를 통한 상호작용도 가능은 하나, 유저의 권한 허락이 있어야함. 즉, 유저 몰래 데이터를 빼낼 수 없음.
- 다른 브라우저 탭, 윈도우는 서로에 대한 정보가 없음. 유저가 한 브라우저 창으로부터 다른 창을 여는 것과 같이 몇몇 경우가 예외로 있긴 한데, 이 경우에도 서로 다른 사이트에서 왔다면 한쪽의 JS로 다른쪽 페이지에 접근할 수 없음. 이를 **Same Origin Policy**라 부름. 말로보면 복잡한데, 사실 되게 간단한 애기다. `http://naver.com`에서 `http://google.com`에 접근해서야 되겠는가?
- 같은 논리로 현재 페이지의 출처가 되는 (same-origin) 서버와 데이터를 주고 받는 것은 쉽다. 그러나 다른 출처가 다른 (cross-orgin) 사이트와 주고 받는 것은 굉장히 제한되어있다. 예를 들어 `hacking-site.com`에서 `bank.com/account`에 JS로 자료 요청 (fetch) 신호를 보냈다 해보자. 신호를 보내는 것은 막을 수 없다. 이런 경우 서버에서 응답은 갈 수 있으나, `hacking-site.com`의 JS는 이를 읽지 못한다. 브라우저 단에서 차단되기 때문이다. 브라우저 단에서 차단 당하지 않으려면 `bank.com/account`에서 돌아온 응답에 특별한 헤더에 "`hacking-site.com`에서 읽어도 좋다"라는 내용이 포함되어 있어야한다. 그런데... 그럼 애초에 origin이 안전한 사이트가 아니라면 응답을 안보내면 되는 것 아닌가? 문제는 서버가 받는 HTTPS의 origin 헤더는 위조가 마음대로 가능하기 때문에 믿을 수 없는 정보라는 것이다. 따라서 브라우저 단에서 이 보안에 대한 책임을 져야하는 것이다. 추가적으로, 이처럼 브라우저 단에서 JS가 응답받은 데이터노출을 차단하는 것은 서버 보안의 문제가 아니라 사용자를 보호하기 위한 장치이다. 은행 서버가 해킹 사이트의 JS응답에 의해 정보를 돌려주었다는 것은 이미 해커가 모종의 방법(e.g., 이미 유저가 은행 사이트에 로그인 해있는 상황에 쿠키와 세션을 이용)을 통해 은행 서버의 인증 절차를 뚫어냈다는 뜻이다. 때문에 더이상 유저 은행 계정/은행 서버의 보안은 논쟁거리가 아니다. 문제는 이 뚫려서 얻어진 정보가 해킹 사이트 JS를 통해 노출이 되어 해커에게 넘어가느냐 마느냐 인것이다. 만약 브라우저가 이를 차단해낸다면 서버 보안이 뚫렸을지언정 유저의 정보는 안전히 보호된다.

### 자바스크립트의 장점
- HTML/CSS와 완벽 호환
- 간단함
- 대부분의 유명한 브라우저에서 사용가능

자바스크립트는 물론 완벽한 언어가 아니므로, 몇몇 바리에이션이 있다. 대표적으로는:

- [CoffeScript](https://coffeescript.org/)
- [TypeScritp](https://www.typescriptlang.org/)
- [Flow](https://flow.org/)
- [Dart](https://www.dartlang.org/)
- [Brython](https://brython.info/)
- [Kotlin](https://kotlinlang.org/docs/reference/js-overview.html)

등등이 있다.
